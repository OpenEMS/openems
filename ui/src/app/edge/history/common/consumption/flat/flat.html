@if (isInitialized) {
  <oe-flat-widget [title]="'General.consumption' | translate" [icon]="{name: 'oe-consumption', color: 'warning'}" button
    [routerLink]="'/device/' + edge.id + newNavigationUrlSegment + '/history/consumptionchart'">
    @if (evcsComponents.length === 0 && consumptionMeterComponents.length === 0 && heatComponents.length === 0,) {
      <oe-flat-widget-line
        channelAddress="_sum/ConsumptionActiveEnergy"
      [converter]="Utils.CONVERT_TO_KILO_WATTHOURS"></oe-flat-widget-line>
    } @else {
      @for (component of evcsComponents; track component) {
        <oe-flat-widget-line [name]="component.alias" [channelAddress]="component.id + '/ActiveConsumptionEnergy'"
        [converter]="Utils.CONVERT_TO_KILO_WATTHOURS"></oe-flat-widget-line>
      }
      @for (component of heatComponents; track component) {
        <oe-flat-widget-line [name]="'Edge.Index.Widgets.HEAT.HEATING_ENERGY' | translate"
          [channelAddress]="component.id + '/ActiveProductionEnergy'"
        [converter]="Utils.CONVERT_TO_KILO_WATTHOURS"></oe-flat-widget-line>
      }
      @for (component of consumptionMeterComponents; track component) {
        <oe-flat-widget-line [name]="component.alias" [channelAddress]="component.id + '/ActiveProductionEnergy'"
        [converter]="Utils.CONVERT_TO_KILO_WATTHOURS"></oe-flat-widget-line>
      }
    }
    @if ((evcsComponents.length !== 0 || consumptionMeterComponents.length !== 0 || heatComponents.length !== 0)) {
      <oe-flat-widget-horizontal-line></oe-flat-widget-horizontal-line>
      <oe-flat-widget-line [name]="'General.otherConsumption'| translate" [value]="totalOtherEnergy"
        [converter]="Utils.CONVERT_TO_KILO_WATTHOURS">
      </oe-flat-widget-line>
    }
  </oe-flat-widget>
}