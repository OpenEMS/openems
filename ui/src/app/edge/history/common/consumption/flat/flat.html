<oe-flat-widget [title]="'GENERAL.CONSUMPTION' | translate" [icon]="{name: 'oe-consumption', color: 'warning'}" button
    [routerLink]="'/device/' + EDGE.ID + newNavigationUrlSegment + '/history/consumptionchart'" *ngIf="isInitialized">

    <oe-flat-widget-line
        *ngIf="EVCS_COMPONENTS.LENGTH === 0 && CONSUMPTION_METER_COMPONENTS.LENGTH === 0 && HEAT_COMPONENTS.LENGTH === 0, else meters"
        channelAddress="_sum/ConsumptionActiveEnergy"
        [converter]="Utils.CONVERT_TO_KILO_WATTHOURS"></oe-flat-widget-line>

    <ng-template #meters>
        <ng-container *ngFor="let component of evcsComponents">
            <oe-flat-widget-line [name]="COMPONENT.ALIAS" [channelAddress]="COMPONENT.ID + '/ActiveConsumptionEnergy'"
                [converter]="Utils.CONVERT_TO_KILO_WATTHOURS"></oe-flat-widget-line>
        </ng-container>

        <ng-container *ngFor="let component of heatComponents">
            <oe-flat-widget-line [name]="'EDGE.INDEX.WIDGETS.HEAT.HEATING_ENERGY' | translate"
                [channelAddress]="COMPONENT.ID + '/ActiveProductionEnergy'"
                [converter]="Utils.CONVERT_TO_KILO_WATTHOURS"></oe-flat-widget-line>
        </ng-container>

        <ng-container *ngFor="let component of consumptionMeterComponents">
            <oe-flat-widget-line [name]="COMPONENT.ALIAS" [channelAddress]="COMPONENT.ID + '/ActiveProductionEnergy'"
                [converter]="Utils.CONVERT_TO_KILO_WATTHOURS"></oe-flat-widget-line>
        </ng-container>

    </ng-template>
    <ng-container
        *ngIf="(EVCS_COMPONENTS.LENGTH !== 0 || CONSUMPTION_METER_COMPONENTS.LENGTH !== 0 || HEAT_COMPONENTS.LENGTH !== 0)">

        <oe-flat-widget-horizontal-line></oe-flat-widget-horizontal-line>
        <oe-flat-widget-line [name]="'GENERAL.OTHER_CONSUMPTION'| translate" [value]="totalOtherEnergy"
            [converter]="Utils.CONVERT_TO_KILO_WATTHOURS">
        </oe-flat-widget-line>

    </ng-container>
</oe-flat-widget>