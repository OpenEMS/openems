<ion-header>
  <ion-toolbar class="ion-justify-content-center" color="primary">
    @if (behaviour !== 0) {
      <ion-title translate>Edge.Config.App.Key.useKey</ion-title>
    }
    @if (behaviour === 0) {
      <ion-title translate>Edge.Config.App.Key.registerKey</ion-title>
    }
    <ion-buttons slot="end">
      <ion-button (click)="modalCtrl.dismiss()">
        <ion-icon name="close"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<div class="inner-content">
  <ngx-spinner [name]="spinnerId"></ngx-spinner>
  <ion-grid>
    <ion-row>
      <ion-col size="12" translate>
        Edge.Config.App.Key.enterKey
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="12">
        <formly-form [form]="form" [fields]="fields" [model]="model" [options]="options"></formly-form>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-grid>
        <ion-row>
          <ion-col size="12" size-md="4">
            <ion-button (click)="modalCtrl.dismiss()" style="display: flex;" translate>
              General.cancel
            </ion-button>
          </ion-col>
          <ion-col size="12" size-md="8">
            @if (!isKeyValid()) {
              <ion-button (click)="validateKey()" [disabled]="form.invalid"
                style="display: flex;" translate>
                Edge.Config.App.Key.validateKey
              </ion-button>
            }
            @if (isKeyValid()) {
              <ion-button (click)="onClickCreateApp()"
                style="display: flex;">
                @switch (behaviour) {
                  <!-- REGISTER -->
                  @case (0) {
                    <ion-label translate>Edge.Config.App.Key.registerKey</ion-label>
                  }
                  <!-- NAVIGATE -->
                  @case (1) {
                    <ion-label translate>Edge.Config.App.Key.useKey</ion-label>
                  }
                  <!-- SELECT -->
                  @case (2) {
                    <ion-label translate>Edge.Config.App.Key.useKey</ion-label>
                  }
                }
              </ion-button>
            }
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-row>
  </ion-grid>
</div>
