<form [formGroup]="formGroup" style="padding-top: 2%; justify-self: center;">
    @switch(control.type){
        @case("SELECT"){
            <ion-segment [formControlName]="controlName">
                @for (button of buttons; track button) {
                    <ion-segment-button [value]="button.value" (click)="button.callback" [ngStyle]="button.style">
                        <ng-template *ngTemplateOutlet="optionContent; context: {$implicit: button}" ></ng-template>
                    </ion-segment-button>
                }
            </ion-segment>
        } 
        @case("RADIO"){
            <ion-radio-group [formControlName]="controlName">
                @for (button of buttons; track button) {
                    <ion-item lines="none" [disabled]="button.disabled">
                        <ion-radio value="end" labelPlacement="end" [value]="button.value" (ionSelect)="button.callback">
                            <ng-template *ngTemplateOutlet="optionContent; context: {$implicit: button}"></ng-template>
                        </ion-radio>
                    </ion-item>
                }
            </ion-radio-group>
        }
    }
</form>

<ng-template #optionContent let-button>
    @if (button.icon) {
        <ion-icon [name]="button.icon.name"
        [color]="formGroup.controls[controlName].value === button.value ? button.icon.color : 'medium'"
        [size]="button.icon.size || 'small'"></ion-icon>
    }
    {{button.name}}
</ng-template>