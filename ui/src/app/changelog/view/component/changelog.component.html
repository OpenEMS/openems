<ion-grid>
  <ion-row class="ion-justify-content-center">
    <ion-col size="12" size-md="8">

      <ion-card>
        <ion-item lines="full" color="light">
          <ion-icon slot="start" color="primary" name="today-outline"></ion-icon>
          <ion-label translate>MENU.CHANGELOG</ion-label>
        </ion-item>
        <ion-card-content>
          <ng-container
            *ngFor="let changelog of changelogs | slice:0:(showAll ? CHANGELOGS.LENGTH : slice);  let last = last;">
            <ion-row>
              <ion-label *ngIf="CHANGELOG.TITLE" style="font-size:large">{{ CHANGELOG.TITLE }}</ion-label>
              <ion-label *ngIf="CHANGELOG.VERSION" style="font-size:large">
                Version {{ CHANGELOG.VERSION }}
              </ion-label>
            </ion-row>
            <ion-row>
              <ul>
                <ng-container *ngFor="let change of CHANGELOG.CHANGES">
                  <ng-container *ngIf="CHANGE.HAS_OWN_PROPERTY('roleIsAtLeast'); else no_roleIsAtLeast">
                    <!-- Limited to 'roleIsAtLeast' -->
                    <ng-container *ngIf="(SERVICE.METADATA | async)?.user as user">
                      <li *ngIf="roleIsAtLeast(USER.GLOBAL_ROLE, CHANGE.ROLE_IS_AT_LEAST)">
                        <span [innerHtml]="CHANGE.CHANGE"></span>
                        <span style="color: darkgray"><i> (Dieser Eintrag ist nur sichtbar f√ºr '{{
                            numberToRole(change['roleIsAtLeast'])
                            }}')</i></span>
                      </li>
                    </ng-container>
                  </ng-container>
                  <ng-template #no_roleIsAtLeast>
                    <!-- Default changelog entry -->
                    <li [innerHtml]="change"></li>
                  </ng-template>
                </ng-container>
              </ul>
            </ion-row>
            <div *ngIf="!last" style="border-bottom: 1px solid lightgray; width: 110%; margin-top: 2%; margin-bottom: 2%; margin-left:
                -5%;">
            </div>
          </ng-container>
          <ion-row *ngIf="CHANGELOGS.LENGTH > slice && !showAll">
            <ion-col>
              <ion-item lines="none" class="ion-float-right">
                <ion-button (click)="showAll = true">
                  Alle anzeigen
                </ion-button>
              </ion-item>
            </ion-col>
          </ion-row>
        </ion-card-content>
      </ion-card>
    </ion-col>
  </ion-row>
</ion-grid>
